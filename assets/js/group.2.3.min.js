function setSticky(){$(window).width()<768?$(".detail-right-panel").trigger("sticky_kit:detach"):$(".detail-right-panel").stick_in_parent({parent:$(".scrollPanel"),offset_top:70})}function adeptHeight(){var e=$("#CalendarBody td").outerWidth()+17;e>90&&(e=90),$("#CalendarBody td").css("height",e+"px"),$("#CalendarBody .Event").css("height",e-26+"px")}function isValid(){return!0}var pax,adult,singleSP,extraBed,childNBed,childWBed,deptID,standardCheckOut;function chooseOption(e,t){if(""!=e){$("#booksummary").hide(),$("#tourdesc").show(),$(".price-summary").show(),$(".detail-right-panel").removeClass("displayStatic"),$("#grandtotal").html("");var a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,n=t.getDate()<10?"0"+t.getDate():t.getDate(),d=t.getFullYear();$(".checkin-date").html(a[t.getDay()]+", "+n+" "+i[o-1]+" "+d);var r=new Date(d,o-1,n,0,0,0,0),l=new Date(d+"-"+o+"-"+n),c=(l=new Date(l.setDate(l.getDate()+dayLength))).getMonth()+1<10?"0"+(l.getMonth()+1):l.getMonth()+1,s=l.getDate()<10?"0"+l.getDate():l.getDate(),h=l.getFullYear();$(".checkout-date").html(a[l.getDay()]+", "+s+" "+i[c-1]+" "+h),deptID=e,document.formBooking.itemid.value="",document.formBooking.txtCheckIn.value=d+"-"+o+"-"+n,$("#divActivity").load(g_DomainName+"/ajax/getgroupactivity.asp?id="+packageID+"&txtcheckin="+d+"-"+o+"-"+n,function(t,a){if("success"==a){for(var i=0;i<dayLength;i++){var o=(r=new Date(r.setDate(r.getDate()+1))).getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1,n=r.getDate()<10?"0"+r.getDate():r.getDate(),d=r.getFullYear();$("#c_"+o+n+d).addClass("selectedDate"),$("#txtCheckOut").val(d+"-"+o+"-"+n),standardCheckOut=r,r=new Date(d,o-1,n,0,0,0,0)}$("#booksummary").hide(),$("#tourdesc").show(),$("#grandtotal").html(""),$("#bedconfig").html(""),document.formBooking.departureid.value=e;var l=getPricePerPax(e);for(i=0;i<l.length;i++)switch(l[i].PriceType){case"ATS":l[i].Price;break;case"SSP":l[i].Price;break;case"XB":l[i].Price;break;case"CWB":l[i].Price;break;case"CNB":l[i].Price}$("#tourbasicprice").slideDown("slow"),$("#btnCheck").show(),drawCalendarSign(),$("#btnCheck").offset().top-$("#jMonthCalendar").offset().top>$(window).height()-50&&$("html, body").animate({scrollTop:$("#btnCheck").offset().top-$(window).height()+50},500)}else $("#tourbasicprice").slideDown("slow").html('<div class=large>Untuk info dan pemesanan, hubungi <a href="tel:+622165314171">(021) 6531 4171</a> atau <a href="tel:+628558868686">0855 886 8686</a></div>')})}}function drawCalendarSign(){""!=$("#txtCheckIn").val()&&$("#btnReset").show();var e=new Date($("#txtCheckIn").val());e.setHours(0);var t=new Date($("#txtCheckOut").val());t.setHours(0),$(".availDate").removeClass("shortenDate").removeClass("extendDate").removeClass("selectedDate").removeClass("hideClass"),$(".DateBox").each(function(){var a=$(this).find(".availDate"),i=$(this).attr("date"),o=i.split("/")[2],n=parseInt(i.split("/")[0])-1,d=i.split("/")[1],r=new Date(o,n,d,0,0,0,0);r<e?a.addClass("hideDate"):r<=standardCheckOut?($(this).addClass("selectedDate"),a.addClass("hideDate")):r<=t?($(this).addClass("selectedDate"),a.addClass("hideDate")):($(this).removeClass("selectedDate"),a.addClass("hideDate"))})}function changeCalendarMonth(){""!=$("#txtCheckIn").val()&&drawCalendarSign()}function resetCalendar(){$("#txtCheckIn").val(""),$("#booksummary,#btnCheck,#btnReset").hide(),$("#tourdesc").show(),$.jMonthCalendar.ChangeMonth($.jMonthCalendar.GetCurrentMonth())}function getPricePerPax(e){for(var t=0;t<tourOptions.length;t++){if(tourOptions[t].OptionID==e)return tourOptions[t].TourPax[0].TourPrices}}function showChild(){var e=document.getElementById("pricingtable").getElementsByTagName("tbody")[0];e.rows[2].style.display="table-row",e.rows[3].style.display="table-row",e.rows[4].style.display="table-row",$("#btnAddChild").hide(),$("#btnRemoveChild").show()}function hideChild(){resetRadioButtonC(),document.formBooking.slcChild.selectedIndex=0,countTotal();var e=document.getElementById("pricingtable").getElementsByTagName("tbody")[0];e.rows[2].style.display="none",e.rows[3].style.display="none",e.rows[4].style.display="none",$("#btnAddChild").show(),$("#btnRemoveChild").hide()}function countTotal(e){$("#btnBook,#btnCheck").hide(),$("#pricedetail").html(""),null==e&&(e=0);var t,a;document.formBooking.itemid.value="",t=document.formBooking.slcAdult.value;for(var i=getPricePerPax(deptID),o=0;o<i.length;o++)switch(i[o].PriceType){case"ATS":i[o].Price;break;case"SSP":i[o].Price;break;case"XB":i[o].Price;break;case"CWB":i[o].Price;break;case"CNB":i[o].Price}a=document.formBooking.slcChild.value,t>0&&($("#bedconfig,#grandtotal,#checkLoader").html(imgloader),$.getJSON(g_domainName+"/ajax/getgroupprice.asp?itemid="+e+"&all=1&op="+document.formBooking.departureid.value+"&adult="+t+"&child="+a,function(e){if($("#checkLoader").html(""),$("#btnCheck").show(),""!=e)if(e.TourRoomConfigs.length>0){var t="",a="<table width=100%>",i=e.TourRoomConfigs[0].Rooms;document.formBooking.itemid.value=e.TourRoomConfigs[0].ItemID;for(var o=0;o<i.length;o++){t+="Room "+i[o].Room+":&nbsp;";for(var n=i[o].Prices,d=0;d<n.length;d++)t+=n[d].Qty+n[d].PriceType,d+1<n.length&&(t+="+");o+1<i.length&&(t+="<br>"),a+="<tr height=5><td></td></tr><tr><td></td>   <td><strong>Room "+i[o].Room+"</strong>       <div>";var r=0;for(d=0;d<n.length;d++){var l=n[d],c="";switch(l.PriceType){case"ATS":c="Adult Twin Sharing";break;case"CNB":c="Child No Bed";break;case"CWB":c="Child With Bed";break;case"XB":c="Extra Bed";break;case"SSP":c="Single Supplement";break;case"CTS":c="Child Twin Share"}a+=l.Qty+" "+c+"<br>",r+=l.Price*l.Qty}a+="      </div>   </td>   <td align=right width=100><div>"+currencySymbol+" "+r.formatMoney(decimalDigit,decimalSep,digitSep)+"</div></td></tr>"}""!=e.TourRoomConfigs[0].Cashback&&(s-=e.TourRoomConfigs[0].Cashback,a+='<tr height=10><td></td></tr><tr><td></td>   <td><div class=box-list-title2>CASHBACK:</div></td>   <td align=right><div class="price">'+currencySymbol+" "+e.TourRoomConfigs[0].Cashback.formatMoney(decimalDigit,decimalSep,digitSep)+"</div></td></tr>"),a+="   <tr height=10><td></td></tr>";var s=parseFloat(e.TourRoomConfigs[0].Total)+parseFloat(e.TourRoomConfigs[0].Surcharge-e.TourRoomConfigs[0].Cashback);$("#divactivity").html("");var h="";if(void 0!==document.frmactivity.activityid)if(void 0!==document.frmactivity.activityid.length)for(var m=0;m<document.frmactivity.activityid.length;m++){var u;if((u=document.frmactivity.qty[m].value)>0){var g=document.frmactivity.activityid[m].value,v=document.frmactivity.operationid[m].value,f="";switch(w=document.frmactivity.ratelink[m].value){case"1":f=g_DomainName+"/ajax/getactivityauprice.asp?id="+g+"&checkin="+$("#txtCheckIn").val()+"&adult="+u+"&child=0";break;case"5":f=g_domainName+"/ajax/getactivityjpprice.asp?id="+g+"&checkin="+$("#txtCheckIn").val()+"&adult="+u+"&child=0";break;case"9":f=g_DomainName+"/ajax/getactivityprice.asp?id="+g+"&checkin="+$("#txtCheckIn").val()+"&adult="+u+"&child=0"}for(var p=!1,y=JSON.parse(getRemote(f)).TourRoomConfigs,C=0;C<y.length;C++)if(y[C].ItemID==v||"9"!=w){var b=y[C].Total,k=y[C].Cashback;b>0&&(s+=b-k,a+="<tr><td colspan=3><div class=dashline></div></td></tr><tr><td></td>   <td colspan=2><b>"+y[C].Description+"</b></td></tr><tr><td></td>    <td>"+u+" x "+currencySymbol+" "+((b-k)/u).formatMoney(decimalDigit,decimalSep,digitSep)+"</td><td valign=bottom align=right width=100>"+currencySymbol+" "+(b-k).formatMoney(decimalDigit,decimalSep,digitSep)+"</td></tr>",h+="<input type=hidden name=activityid value="+g+"><input type=hidden name=ratelink value="+w+"><input type=hidden name=operationid value="+v+"><input type=hidden name=qty value="+u+">",p=!0)}p||(alert(document.frmactivity.activityname[m].value+" is not available."),document.frmactivity.qty[m].selectedIndex=0)}}else if((u=document.frmactivity.qty.value)>0){var w;g=document.frmactivity.activityid.value,v=document.frmactivity.operationid.value,f="";switch(w=document.frmactivity.ratelink.value){case"1":f=g_DomainName+"/ajax/getactivityauprice.asp?id="+g+"&checkin="+$("#txtCheckIn").val()+"&adult="+u+"&child=0";break;case"5":f=g_domainName+"/ajax/getactivityjpprice.asp?id="+g+"&checkin="+$("#txtCheckIn").val()+"&adult="+u+"&child=0";break;case"9":f=g_DomainName+"/ajax/getactivityprice.asp?id="+g+"&checkin="+$("#txtCheckIn").val()+"&adult="+u+"&child=0"}for(p=!1,y=JSON.parse(getRemote(f)).TourRoomConfigs,C=0;C<y.length;C++){if(y[C].ItemID==v||"9"!=w)(b=y[C].Total-y[C].Cashback)>0&&(s+=b,a+="<tr><td colspan=3><div class=dashline></div></td></tr><tr><td></td>   <td colspan=2><b>"+y[C].Description+"</b></td></tr><tr><td></td>    <td>"+u+" x "+currencySymbol+" "+(b/u).formatMoney(decimalDigit,decimalSep,digitSep)+"</td><td valign=bottom align=right width=100>"+currencySymbol+" "+b.formatMoney(decimalDigit,decimalSep,digitSep)+"</td></tr>",h+="<input type=hidden name=activityid value="+g+"><input type=hidden name=operationid value="+v+"><input type=hidden name=ratelink value="+w+"><input type=hidden name=qty value="+u+">",p=!0)}p||(alert(document.frmactivity.activityname.value+" is not available."),document.frmactivity.qty.selectedIndex=0)}$("#divactivity").html(h),a+="</table>",$("#pricedetail").html(a),$("#bedconfig").html(t),$("#booksummary").show(),$("#tourdesc").hide(),$("#grandtotal").html("").html(currencySymbol+" "+s.formatMoney(decimalDigit,decimalSep,digitSep)),e.TourRoomConfigs.length>1?$("#btnChangeConfig").show():$("#btnChangeConfig").hide()}else document.formBooking.itemid.value=0,$("#bedconfig").html(""),$("#grandtotal").html("TBA"),$("#btnChangeConfig").hide(),$("#btnBook").show(),$("#booksummary").show(),$("#tourdesc").hide();else document.formBooking.itemid.value=0,$("#bedconfig").html(""),$("#grandtotal").html("TBA"),$("#btnChangeConfig").hide(),$("#btnBook").show(),$("#booksummary").show(),$("#tourdesc").hide();$(window).width()}))}function showConfig(){var e=0,t=0;if(""!=document.formBooking.slcAdult.value)e=document.formBooking.slcAdult.value;else for(var a=0;a<4;a++)if(document.formBooking.adult[a].checked){e=a+1;break}if(""!=document.formBooking.slcChild.value)t=document.formBooking.slcChild.value;else for(a=0;a<4;a++)if(document.formBooking.child[a].checked){t=a+1;break}var i=document.formBooking.itemid.value;$.colorbox({width:"750px",height:"80%",iframe:!0,onClosed:function(){console.log($("#itemid:checked").val())},href:g_domainName+"tour/grouproomconfig.asp?curr="+currency+"&id="+document.formBooking.id.value+"&departureid="+document.formBooking.departureid.value+"&adult="+e+"&child="+t+"&itemid="+i})}function changeConfig(e){document.formBooking.itemid.value!=e&&countTotal(e)}function getRemote(e){return $.ajax({type:"GET",url:e,async:!1}).responseText}$(document).ready(function(){$("#btnAddChild").hide(),$("#btnRemoveChild").hide(),$("#btnChangeConfig").hide(),$("#booksummary").hide(),$(".radiooption").hide(),$(".divCollapse .collapse").on("show.bs.collapse",function(){$(this).parent().addClass("active")}).on("hide.bs.collapse",function(){$(this).parent().removeClass("active")}),$("#bookingSummary").on("show.bs.collapse",function(){$(this).parent().find(".fa").removeClass("fa-angle-double-up").addClass("fa-angle-double-down"),$("body").css("overflow","hidden")}).on("hide.bs.collapse",function(){$(this).parent().find(".fa").removeClass("fa-angle-double-down").addClass("fa-angle-double-up"),$("body").css("overflow","visible")}),$(window).width()<768&&$(".detail-right-panel").detach().insertAfter(".title_detail_tour"),$(window).resize(function(){setSticky()}),setSticky()}),window.onresize=function(e){adeptHeight()},window.onunload=function(e){};